# Telegram Portfolio Bot ‚Äî –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–ù–µ–±–æ–ª—å—à–æ–π Telegram‚Äë–±–æ—Ç –Ω–∞ –±–∞–∑–µ Aiogram 3.x, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ ¬´–ø—É–±–ª–∏—á–Ω—ã—Ö –∫–µ–π—Å–æ–≤¬ª –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–º–∏ —á–µ—Ä–µ–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –∞–¥–º–∏–Ω–∫—É. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–µ–π—Å—ã, —Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç–∑—ã–≤—ã, —Å–≤—è–∑–∞—Ç—å—Å—è —Å –∞–≤—Ç–æ—Ä–æ–º –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏) ‚úÖ
- [–°–∫—Ä–∏–Ω—à–æ—Ç—ã / –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è](#—Å–∫—Ä–∏–Ω—à–æ—Ç—ã--–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è) üñºÔ∏è
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–ª–æ–∫–∞–ª—å–Ω–æ)](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç-–ª–æ–∫–∞–ª—å–Ω–æ) ‚ö°
- [–ó–∞–ø—É—Å–∫ —Å Docker / Docker Compose](#–∑–∞–ø—É—Å–∫-—Å-docker--docker-compose) üê≥
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env)](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-env) ‚öôÔ∏è
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞) üèóÔ∏è
- [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Ç–∞–±–ª–∏—Ü—ã)](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö-—Ç–∞–±–ª–∏—Ü—ã) üóÑÔ∏è
- [–ê–¥–º–∏–Ω–∫–∞](#–∞–¥–º–∏–Ω–∫–∞) üîí
- [–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏](#–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ-—Å—Ü–µ–Ω–∞—Ä–∏–∏) üë•
- [–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–µ—Ç—Ä–∏–∫–∏](#–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ-–∏-–º–µ—Ç—Ä–∏–∫–∏) üìä
- [FAQ / Troubleshooting](#faq--troubleshooting) ‚ùì
- [Roadmap / Ideas](#roadmap--ideas) üõ£Ô∏è
- [Contributing](#contributing) ü§ù
- [Security](#security) üîê
- [–ö–æ–Ω—Ç–∞–∫—Ç—ã / –†–µ—Å—É—Ä—Å—ã](#–∫–æ–Ω—Ç–∞–∫—Ç—ã--—Ä–µ—Å—É—Ä—Å—ã) üì¨
- [–õ–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏–µ / –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏–µ--–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ) üìù

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–ª–æ–∫–∞–ª—å–Ω–æ)

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –∑–∞–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É:

```bash
git clone <repo>
cd telegram_portfolio_clear_bot
```

2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
python -m venv .venv
# Windows
.venv\Scripts\activate
# Unix
source .venv/bin/activate

pip install -r requirements.txt
```

3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` (—Å–º. —Ä–∞–∑–¥–µ–ª –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∏–∂–µ) –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ:

```bash
python run_bot.py
# –∏–ª–∏
python aiogram_run.py
```

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ `aiogram_run.py` –≤—ã–∑—ã–≤–∞–µ—Ç `init_db()` –∏ —Å–æ–∑–¥–∞—ë—Ç –Ω—É–∂–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

## –ó–∞–ø—É—Å–∫ —Å Docker / Docker Compose

–í –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å `Dockerfile` –∏ `docker-compose.yml` (—Å —Å–µ—Ä–≤–∏—Å–∞–º–∏ `db` –∏ `bot`). –ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞:

```bash
docker compose up --build
# –∏–ª–∏
docker-compose up --build
```

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä `db` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—Ä–∞–∑ `postgres:17`; –≤ `docker-compose.yml` PG –≤—ã—Å—Ç–∞–≤–ª–µ–Ω –Ω–∞ –≤–Ω–µ—à–Ω–∏–π –ø–æ—Ä—Ç `5433` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ). –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä `bot` –∑–∞–ø—É—Å–∫–∞–µ—Ç `python run_bot.py`.

–°–æ–≤–µ—Ç –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö: —Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ `docker compose logs bot` –∏–ª–∏ `docker compose logs db` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.

## –ö–æ–º–∞–Ω–¥—ã

-   /start ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
-   /profile ‚Äî –º–æ–π –ø—Ä–æ—Ñ–∏–ª—å
-   /help ‚Äî –ø–æ–º–æ—â—å
-   ¬´‚öôÔ∏è –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å¬ª ‚Äî –∫–Ω–æ–ø–∫–∞ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ö—Ä–∞—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–≤–∞–∂–Ω—ã–µ –ø–∞–ø–∫–∏/—Ñ–∞–π–ª—ã):

```
aiogram_run.py         # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–æ–≤, lifecycle —Ö—É–∫ —Å—Ç–∞—Ä—Ç–∞
run_bot.py             # –æ–±–æ–ª–æ—á–∫–∞ –∑–∞–ø—É—Å–∫–∞
create_bot.py          # –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Bot, Dispatcher –∏ db_manager
requirements.txt
Dockerfile
docker-compose.yml
README.md

db_handler/
  db_funk.py           # —Å–ª–æ–π —Ä–∞–±–æ—Ç—ã —Å –ë–î: —Å—Ö–µ–º—ã –∏ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
handlers/
  user_router.py       # –ø—É–±–ª–∏—á–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (–º–µ–Ω—é, –∫–µ–π—Å—ã, –æ—Ç–∑—ã–≤—ã, –∫–æ–Ω—Ç–∞–∫—Ç)
  admin_panel.py       # –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∞–¥–º–∏–Ω–∫–∏ (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–µ–π—Å–∞–º–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –æ—Ç—á—ë—Ç—ã)
  services/            # –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (stat, bot control, system status)
keyboards/
  kbs.py               # inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏ callback —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
src/
  images/              # –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è-—Ä–µ—Å—É—Ä—Å—ã
  html/                # —à–∞–±–ª–æ–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (template-statistic.html)
utils/
  utils.py             # –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã (–ø—É—Å—Ç–æ–π —à–∞–±–ª–æ–Ω)
```

–û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è: handlers —Ñ–æ—Ä–º–∏—Ä—É—é—Ç –ª–æ–≥–∏–∫—É –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (keyboards) –∑–∞–¥–∞—é—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏—é, db_handler —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

–ù–∞–≤–∏–≥–∞—Ü–∏—è/Callback —Ñ–æ—Ä–º–∞—Ç—ã:
- –ü—É–±–ª–∏—á–Ω–æ–µ –º–µ–Ω—é: `menu:...` (–Ω–∞–ø—Ä–∏–º–µ—Ä `menu:cases:view:{case_id}|{page}`)
- –ê–¥–º–∏–Ω –º–µ–Ω—é: `admin:...` (–Ω–∞–ø—Ä–∏–º–µ—Ä `admin:cases:edit_title:{case_id}|{back_page}`)

–≠—Ç–∏ callback‚Äë–¥–∞–Ω–Ω—ã–µ –ø–∞—Ä—Å—è—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ä–æ—É—Ç–µ—Ä–∞—Ö (`user_router`, `admin_panel`).
---

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Ç–∞–±–ª–∏—Ü—ã)

–ù–∏–∂–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã —Ç–∞–±–ª–∏—Ü—ã, –∫–æ—Ç–æ—Ä—ã–µ —è–≤–Ω–æ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π `init_db()` –≤ `db_handler/db_funk.py` (SQL `CREATE TABLE IF NOT EXISTS` –≤ –∫–æ–¥–µ).

| Table | Purpose | Key columns | Relations / Indexes |
|---|---|---|---|
| `users_reg` | –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–ø—Ä–∏ /start) | `user_id` (PK), `full_name`, `user_login`, `date_reg` | ‚Äî |
| `cases` | –ö–µ–π—Å—ã: –∑–∞–≥–æ–ª–æ–≤–æ–∫, –æ–ø–∏—Å–∞–Ω–∏–µ –∏ —Å—Ç–∞—Ç—É—Å | `case_id` (PK), `title`, `description`, `status`, `sort_order`, `created`, `updated` | CHECK on `status` ('draft','published','archived') |
| `case_images` | –ú–µ–¥–∏–∞ –¥–ª—è –∫–µ–π—Å–æ–≤ (—Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ), –ø–æ–∑–∏—Ü–∏—è –∏ —Ñ–ª–∞–≥ –æ–±–ª–æ–∂–∫–∏ | `image_id` (PK), `case_id` (FK ‚Üí `cases.case_id`), `tg_file_id`, `media_type`, `position`, `is_cover`, `created` | FK `case_id` ON DELETE CASCADE; –∏–Ω–¥–µ–∫—Å—ã: `idx_case_images_case_id`, `idx_case_images_position` |
| `user_events` | –õ–æ–≥ —Å–æ–±—ã—Ç–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–¥–ª—è –º–µ—Ç—Ä–∏–∫) | `event_id` (PK), `user_id`, `event_type`, `event_context`, `event_value`, `payload` (JSONB), `created_at` | –∏–Ω–¥–µ–∫—Å—ã: `idx_user_events_user_id`, `idx_user_events_event_type`, `idx_user_events_created_at` |
| `case_reviews` | –û—Ç–∑—ã–≤—ã –ø–æ –∫–µ–π—Å–∞–º (–∞–≥—Ä–µ–≥–∞—Ç–æ—Ä) | `review_id` (PK), `case_id` (UNIQUE FK ‚Üí `cases.case_id`), `created`, `updated` | FK `case_id` ON DELETE CASCADE; –∏–Ω–¥–µ–∫—Å `idx_case_reviews_case_id` |
| `case_review_items` | –≠–ª–µ–º–µ–Ω—Ç—ã –æ—Ç–∑—ã–≤–∞ (—Ç–µ–∫—Å—Ç/—Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ/–≥–æ–ª–æ—Å) | `item_id` (PK), `review_id` (FK ‚Üí `case_reviews.review_id`), `tg_file_id`, `media_type`, `text_content`, `position`, `created` | FK `review_id` ON DELETE CASCADE; –∏–Ω–¥–µ–∫—Å `idx_case_review_items_review_id_position` |
| `case_cta` | CTA (–∫–Ω–æ–ø–∫–∞) –¥–ª—è –∫–µ–π—Å–∞ | `case_id` (PK, FK ‚Üí `cases.case_id`), `button_text`, `action_type`, `action_value`, `updated` | FK ON DELETE CASCADE |
| `bot_settings` | –ö–ª—é—á‚Äë–∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä maintenance) | `key` (PK), `value`, `updated_at` | ‚Äî |

**–ì–¥–µ –≤ –∫–æ–¥–µ:** `db_handler/db_funk.py`, `init_db.py` (—É—Ç–∏–ª–∏—Ç–∞ –∑–∞–ø—É—Å–∫–∞), SQL –≤ `init_db()` –∏ —Ñ—É–Ω–∫—Ü–∏–∏ CRUD (e.g., `create_case_draft`, `add_case_media`, `upsert_case_review`, `upsert_case_cta`).

---

## –ê–¥–º–∏–Ω–∫–∞

- –ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–¥–º–∏–Ω: —Å–ø–∏—Å–æ–∫ `admins` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `ADMINS` –≤ `create_bot.py` (`admins = [int(...) for ...]`). –í –∫–æ–¥–µ –¥–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω—Å–∫–∏–º —Ñ—É–Ω–∫—Ü–∏—è–º –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —É—Å–ª–æ–≤–∏–µ–º `if callback.from_user.id not in admins`.

- –†–∞–∑–¥–µ–ª—ã –∞–¥–º–∏–Ω–∫–∏ (—Ä–µ–∞–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –∫–æ–¥–µ):
  - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (`admin:main`) ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—é (`admin_panel_kb`).
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (`admin:stats`) ‚Äî —Å–±–æ—Ä HTML‚Äë–æ—Ç—á—ë—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞ (—Å–º. `handlers/services/statistics_service.py`).
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ (`admin:settings`) ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ—Ö—Ä–∞–±–æ—Ç (`maintenance` —á–µ—Ä–µ–∑ `bot_settings`), –æ—á–∏—Å—Ç–∫–∞ –æ—Ç—á—ë—Ç–æ–≤, –∑–∞–ø—Ä–æ—Å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ (`request_restart`).
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–µ–π—Å–∞–º–∏ (`admin:cases`) ‚Äî —Å–ø–∏—Å–æ–∫, —Å–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ (`create_case_draft`), –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–µ–π—Å–∞ (–∑–∞–≥–æ–ª–æ–≤–æ–∫, –æ–ø–∏—Å–∞–Ω–∏–µ, –æ–±–ª–æ–∂–∫–∞/–∞–ª—å–±–æ–º), —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞–º–∏ (`upsert_case_review`) –∏ CTA (`upsert_case_cta`), –ø—É–±–ª–∏–∫–∞—Ü–∏—è/—Å–Ω—è—Ç–∏–µ (`update_case_field` –¥–ª—è `status`).

- Callback —Ñ–æ—Ä–º–∞—Ç –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è: –≤—Å–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ callback –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ `admin:section:action:payload` –∏–ª–∏ –≤–∞—Ä–∏–∞–Ω—Ç —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —á–∞—Å—Ç—è–º–∏ (–≤ `keyboards/kbs.py` –≤–∏–¥–Ω–æ `admin:cases:view:{case_id}|{page}`, `admin:cases:edit_title:{case_id}|{back_page}`, `admin:settings:maint_toggle` –∏ —Ç.–¥.). –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö: `parts = callback.data.split(":")` –≤ `admin_panel.py`.

- –¢–∏–ø–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –∫–æ–¥–æ–º):
  - –°–æ–∑–¥–∞—Ç—å –∫–µ–π—Å: `admin:cases:new` ‚Üí `create_case_draft()` ‚Üí –æ—Ç–∫—Ä—ã—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä.
  - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫/–æ–ø–∏—Å–∞–Ω–∏–µ: `admin:cases:edit_title|edit_desc` ‚Üí –ø–µ—Ä–µ–π—Ç–∏ –≤ State `CaseEdit.waiting_value` ‚Üí `update_case_field()`.
  - –û–±–Ω–æ–≤–∏—Ç—å –æ–±–ª–æ–∂–∫—É/–∞–ª—å–±–æ–º: `admin:cases:edit_cover` ‚Üí –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ ‚Üí `add_case_media()` / `delete_case_images()`.
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞–º–∏: `admin:cases:review` ‚Üí —Å–æ–±—Ä–∞—Ç—å –º–µ–¥–∏–∞/—Ç–µ–∫—Å—Ç ‚Üí `upsert_case_review()`.
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∏: `admin:settings:maint_toggle` (–ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç `bot_settings` —á–µ—Ä–µ–∑ `set_setting`/`get_setting`), `admin:settings:reports_cleanup` (–æ—á–∏—Å—Ç–∫–∞ —á–µ—Ä–µ–∑ `handlers/services/statistics_files_service.py`), `admin:settings:restart` ‚Üí `request_restart()`.

**–ì–¥–µ –≤ –∫–æ–¥–µ:** `handlers/admin_panel.py`, `keyboards/kbs.py`, `create_bot.py` (–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `admins`), `db_handler/db_funk.py` (CRUD), `handlers/services/statistics_service.py`, `handlers/services/bot_control_service.py`, `handlers/services/statistics_files_service.py`.

---

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

- `/start`: –≤ `handlers/user_router.py` –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `cmd_start` –≤—ã–∑—ã–≤–∞–µ—Ç `insert_user(...)` (—Å–æ–∑–¥–∞—ë—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –≤ `users_reg`), –ª–æ–≥–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ `start` –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω (`main_kb`).

- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è: –∫–Ω–æ–ø–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –≤ `keyboards/kbs.py` (`main_kb` –∏ –¥—Ä.), –Ω–∞–≤–∏–≥–∞—Ü–∏—è —á–µ—Ä–µ–∑ callback'—ã `menu:...` (—Å–º. `open_main_panel` –≤ `user_router.py`). –û—Å–Ω–æ–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è: `contact`, `aboutMe`, `cases` (list/view/review), `steps`.

- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∫–µ–π—Å–æ–≤: `render_public_case_list()` –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã —á–µ—Ä–µ–∑ `get_cases_page()` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ + –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É `public_cases_kb`.

- –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–µ–π—Å–∞: `render_public_case_view()` –ø–æ–ª—É—á–∞–µ—Ç –∫–µ–π—Å —á–µ—Ä–µ–∑ `get_case_by_id()`, –º–µ–¥–∏–∞ —á–µ—Ä–µ–∑ `get_case_images()`, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞–ª—å–±–æ–º (`answer_media_group`) –∏ –∫–∞—Ä—Ç–æ—á–∫—É —Å CTA (`public_case_view_kb`). –í–æ–∑–≤—Ä–∞—Ç –∫ —Å–ø–∏—Å–∫—É/–≥–ª–∞–≤–Ω–æ–º—É –º–µ–Ω—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–Ω–æ–ø–∫–∞–º–∏ –≤ `keyboards/kbs.py`.

- –û—Ç–∑—ã–≤—ã: `menu:cases:review:{case_id}|{page}` ‚Äî `get_case_review()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–±–æ—Ä —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (`case_review_items`) –∏ –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≥–æ–ª–æ—Å/–≤–∏–¥–µ–æ/–∞–ª—å–±–æ–º/—Ç–µ–∫—Å—Ç—ã –ø–æ —Ç–∏–ø—É –º–µ–¥–∏–∞.

- CTA –∏ –∫–æ–Ω—Ç–∞–∫—Ç: –Ω–∞–∂–∞—Ç–∏–µ CTA –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è (`cta_click`, `case_contact_click`), –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —ç–∫—Ä–∞–Ω –∫–æ–Ω—Ç–∞–∫—Ç–∞ (`render_contact_screen`).

- –ß—Ç–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è: –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ `user_events` —á–µ—Ä–µ–∑ `log_event()` (—á–µ—Ä–µ–∑ –æ–±—ë—Ä—Ç–∫—É `safe_log_event` –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö): `start`, `menu_click`, `cases_open`, `case_view`, `review_open`, `cta_click`, `case_contact_click`, `contact_open`, `steps_open` –∏ –¥—Ä.

**–ì–¥–µ –≤ –∫–æ–¥–µ:** `handlers/user_router.py`, `keyboards/kbs.py`, `db_handler/db_funk.py` (—Ñ—É–Ω–∫—Ü–∏–∏: `insert_user`, `get_cases_page`, `get_case_by_id`, `get_case_images`, `get_case_review`, `get_case_cta`, `log_event`).

---

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–µ—Ç—Ä–∏–∫–∏

- –û–±—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è: `create_bot.py` –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç `logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(name)s - %(levelname)s - %(message)s')`. –õ–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –≤ stdout (–∫–æ–Ω—Å–æ–ª—å); –≤ –∫–æ–¥–µ –Ω–µ—Ç —è–≤–Ω–æ–π –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª.

- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é `log_event(...)` –≤ `db_handler/db_funk.py`, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü—É `user_events` –ø–æ–ª—è: `user_id`, `event_type`, `event_context`, `event_value`, `payload` (JSONB), `created_at`.

- –û–±—ë—Ä—Ç–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `safe_log_event(...)` (–≤ `user_router.py` –∏ `admin_panel.py`) ‚Äî –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç –ø–∞–¥–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –∑–∞–ø–∏—Å–∏ –≤ –ë–î.

- –ú–µ—Ç—Ä–∏–∫–∏ –∏ –æ—Ç—á—ë—Ç—ã: `handlers/services/statistics_service.py` —Å–æ–±–∏—Ä–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (calls –∫ `get_events_total`, `get_top_menu_clicks`, `get_top_cases`, `get_funnel`, `get_stuck_points`, `get_recent_users` –≤ `db_handler/db_funk.py`) –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç HTML‚Äë–æ—Ç—á—ë—Ç —á–µ—Ä–µ–∑ —à–∞–±–ª–æ–Ω `src/html/template-statistic.html`. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–∞–π–ª—ã –≤ `src/html/out`.

- –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã: –≤ `Makefile` –µ—Å—Ç—å –∑–∞–¥–∞—á–∏ `make logs` –∏ `make logs-db` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤; –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–æ–¥ –ª–æ–≥–∏—Ä—É–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è `STAT REPORT ERROR` –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ.

**–ì–¥–µ –≤ –∫–æ–¥–µ:** `create_bot.py`, `db_handler/db_funk.py` (log_event –∏ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –º–µ—Ç—Ä–∏–∫), `handlers/services/statistics_service.py`, `handlers/services/statistics_files_service.py`, `Makefile`.

---

## FAQ / Troubleshooting

–ù–∏–∂–µ ‚Äî —Ä–µ–∞–ª—å–Ω—ã–µ, –ø—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –ø—É–Ω–∫—Ç—ã, –≤—ã—Ç–µ–∫–∞—é—â–∏–µ –∏–∑ –∫–æ–¥–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

1) –°–∏–º–ø—Ç–æ–º: –±–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞
   - –ü—Ä–∏—á–∏–Ω–∞: –Ω–µ –∑–∞–¥–∞–Ω `TOKEN` –≤ `.env` –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª–µ–Ω.  
   - –†–µ—à–µ–Ω–∏–µ: —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤ `.env` –µ—Å—Ç—å `TOKEN=<your_token>`, –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞.

2) –°–∏–º–ø—Ç–æ–º: –∞–¥–º–∏–Ω‚Äë–ø–∞–Ω–µ–ª—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –∏–ª–∏ –∫–Ω–æ–ø–∫–∞ –Ω–µ –≤–∏–¥–Ω–∞
   - –ü—Ä–∏—á–∏–Ω–∞: –≤–∞—à Telegram `user_id` –Ω–µ –≤–∫–ª—é—á—ë–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `ADMINS` (—Å–ø–∏—Å–æ–∫ –≤ `create_bot.py`).  
   - –†–µ—à–µ–Ω–∏–µ: –¥–æ–±–∞–≤–∏—Ç—å –≤–∞—à `user_id` –≤ `ADMINS` –≤ `.env` (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é) –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä/–±–æ—Ç.

3) –°–∏–º–ø—Ç–æ–º: –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ë–î / –æ—à–∏–±–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
   - –ü—Ä–∏—á–∏–Ω–∞: `PG_LINK` –Ω–µ –∑–∞–¥–∞–Ω –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (host/port/user/pass/db) –Ω–µ–≤–µ—Ä–Ω—ã; –≤ Docker ‚Äî —Å–µ—Ä–≤–∏—Å `db` –º–æ–∂–µ—Ç –Ω–µ –ø—Ä–æ–π—Ç–∏ healthcheck.  
   - –†–µ—à–µ–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `PG_LINK` (–∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `docker-compose.yml`), –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ `docker compose logs db`, —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Postgres –∑–∞–ø—É—â–µ–Ω –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è; –º–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –≤—ã–ø–æ–ª–Ω–∏—Ç—å `python init_db.py` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü.

4) –°–∏–º–ø—Ç–æ–º: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è / "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–±—Ä–∞—Ç—å –æ—Ç—á—ë—Ç"
   - –ü—Ä–∏—á–∏–Ω–∞: –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –æ—Ç—á—ë—Ç–∞ (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ `STAT REPORT ERROR`).  
   - –†–µ—à–µ–Ω–∏–µ: –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞ (`docker compose logs bot` –∏–ª–∏ `make logs`), –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `src/html/template-statistic.html` –¥–æ—Å—Ç—É–ø–µ–Ω –∏ —á—Ç–æ –∑–∞–ø–∏—Å–∏ –≤ `user_events` –µ—Å—Ç—å.

5) –°–∏–º–ø—Ç–æ–º: callback‚Äô—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç / "Unknown command" / "Invalid case"
   - –ü—Ä–∏—á–∏–Ω–∞: –ø–æ–≤—Ä–µ–∂–¥—ë–Ω `callback_data` (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç/payload) –∏–ª–∏ –æ–∂–∏–¥–∞–µ–º—ã–µ –ø–æ–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.  
   - –†–µ—à–µ–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫–∏–µ `callback_data` —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≤ `keyboards/kbs.py`, –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ payload —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–µ–º–æ–º—É –ø–∞—Ä—Å–∏–Ω–≥—É –≤ `user_router.py` / `admin_panel.py`.

6) –°–∏–º–ø—Ç–æ–º: Docker compose –Ω–µ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –∏–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–∞–¥–∞—é—Ç
   - –ü—Ä–∏—á–∏–Ω–∞: –æ—à–∏–±–∫–∏ –≤ `docker-compose.yml` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è, –ø—Ä–æ–±–ª–µ–º—ã —Å volume –∏–ª–∏ healthcheck).  
   - –†–µ—à–µ–Ω–∏–µ: —Å–º–æ—Ç—Ä–µ—Ç—å `docker compose ps` –∏ `docker compose logs`; –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã `docker compose up --build`; —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ—Ä—Ç PostgreSQL –Ω–µ –∑–∞–Ω—è—Ç (–≤ `docker-compose.yml` —É–∫–∞–∑–∞–Ω–æ `5433:5432` –¥–ª—è —Ö–æ—Å—Ç–∞).

**–ì–¥–µ –≤ –∫–æ–¥–µ:** `.env`/`create_bot.py` (TOKEN, ADMINS, PG_LINK), `docker-compose.yml`, `handlers/services/statistics_service.py` (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞), `db_handler/db_funk.py` (init_db, SQL).

---

## Roadmap / Ideas

–ò–¥–µ–∏, –≤–ø–∏—Å–∞–Ω–Ω—ã–µ –≤ —Ç–µ–∫—É—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (–æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö –∫–æ–¥–∞ –∏ –æ—á–µ–≤–∏–¥–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏—è—Ö):
1. –î–æ–±–∞–≤–∏—Ç—å CI (unit + integration) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ CRUD –∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (—Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ—Å—Ç–æ–≤).
2. –í–≤–µ—Å—Ç–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ (Alembic) –≤–º–µ—Å—Ç–æ —Ç–µ–∫—É—â–µ–≥–æ `init_db()` –¥–ª—è —É–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö —Å—Ö–µ–º –∏ –æ—Ç–∫–∞—Ç–æ–≤.
3. –í—ã–Ω–µ—Å—Ç–∏ –∞–¥–º–∏–Ω–æ–≤ –≤ –ë–î/—Ä–æ–ª–∏ (—Å–µ–π—á–∞—Å `ADMINS` —Ç–æ–ª—å–∫–æ –≤ env) –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∞–º–∏.
4. –í–µ–±‚Äë–∞–¥–º–∏–Ω–∫–∞ (dashboard) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–µ–π—Å–∞–º–∏ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–≤–º–µ—Å—Ç–æ —Ç–æ–ª—å–∫–æ inline –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞).
5. –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –∫–µ–π—Å–æ–≤ –∏ –æ—Ç–∑—ã–≤–æ–≤ (CSV/JSON) —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å—ã (–Ω–∞ –±–∞–∑–µ CRUD —Ñ—É–Ω–∫—Ü–∏–π –≤ `db_handler/db_funk.py`).
6. –ü–æ–¥–∫–ª—é—á–∏—Ç—å Sentry/–∞–ª–µ—Ä—Ç—ã –∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ç–µ–∫—É—â–µ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî stdout).
7. –£–ª—É—á—à–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å: mock DB, —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è aiogram –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.
8. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ (i18n) ‚Äî —Ç–µ–∫—Å—Ç—ã —Å–µ–π—á–∞—Å –∂–µ—Å—Ç–∫–æ –≤ –∫–æ–¥–µ.
9. –ë—ç–∫–∞–ø/—ç–∫—Å–ø–æ—Ä—Ç –±–∞–∑—ã –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

**–ì–¥–µ –≤ –∫–æ–¥–µ:** –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ–ø–∏—Ä–∞—é—Ç—Å—è –Ω–∞ `handlers/`, `db_handler/db_funk.py`, `handlers/services/`, `Dockerfile` / `docker-compose.yml`.

---

## Contributing

–ö–æ—Ä–æ—Ç–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –≤–∫–ª–∞–¥–∞ –≤ –ø—Ä–æ–µ–∫—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):
1. Fork ‚Üí —Å–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É `feature/your-feature` –∏–ª–∏ `fix/issue-123`.
2. –î–µ—Ä–∂–∏—Ç–µ –∫–æ–º–º–∏—Ç—ã –Ω–µ–±–æ–ª—å—à–∏–º–∏ –∏ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–º–∏, —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ (English or Russian is fine).
3. –û–±–Ω–æ–≤–ª—è–π—Ç–µ `requirements.txt` –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
4. –î–æ–±–∞–≤–ª—è–π—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ (–≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ —Ç–µ—Å—Ç–æ–≤ –Ω–µ—Ç ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç—Å—è).
5. –û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ Pull Request —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ —Å—Å—ã–ª–∫–æ–π –Ω–∞ issue (–µ—Å–ª–∏ –µ—Å—Ç—å).

**–ì–¥–µ –≤ –∫–æ–¥–µ:** –æ–±—â–∏–π –≤–∫–ª–∞–¥ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç `handlers/`, `db_handler/`, `keyboards/`, `handlers/services/`.

---

## Security

–ö–æ—Ä–æ—Ç–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, –≤—ã—Ç–µ–∫–∞—é—â–∏–µ –∏–∑ –∫–æ–¥–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
- –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` –∏ —Å–µ–∫—Ä–µ—Ç—ã (–≤ `docker-compose.yml` –∏ `create_bot.py` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è).
- –†–æ—Ç–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞: –ø—Ä–∏ —É—Ç–µ—á–∫–µ `TOKEN` ‚Äî —Å–º–µ–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ BotFather –∏ –æ–±–Ω–æ–≤–∏—Ç–µ `.env`.
- –ê–¥–º–∏–Ω—Å–∫–∏–µ –ø—Ä–∞–≤–∞: —Å–µ–π—á–∞—Å `ADMINS` —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `.env` ‚Äî –ø–æ–¥—É–º–∞—Ç—å –æ –ø–µ—Ä–µ–Ω–æ—Å–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ –∏–ª–∏ –≤ –ë–î –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏.
- –ü—Ä–∞–≤–∞ –ë–î: –≤ Docker Compose –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `botuser` ‚Äî –¥–µ—Ä–∂–∏—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏ –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ production.
- `ROOT_PASS` (–ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è `asyncpg_lite` —É–¥–∞–ª–µ–Ω–∏—è) –Ω–∞–¥–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ —Å–µ–∫—Ä–µ—Ç–µ –∏ –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å.

**–ì–¥–µ –≤ –∫–æ–¥–µ:** `create_bot.py`, `docker-compose.yml`, `.env` (–Ω–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏), `db_handler/db_funk.py` (deletion_password –≤ DatabaseManager).

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã / —Ä–µ—Å—É—Ä—Å—ã

- –ö–∞–Ω–∞–ª –∞–≤—Ç–æ—Ä–∞: https://t.me/PantelidiIlia
- –í –∫–æ–¥–µ —Ç–∞–∫–∂–µ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è: @RuviconChief (–≤ —Ç–µ–∫—Å—Ç–µ/–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞)

**–ì–¥–µ –≤ –∫–æ–¥–µ:** —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –≤ `keyboards/kbs.py` –∏ –≤ README (—ç—Ç–æ—Ç —Ñ–∞–π–ª).

---

## –õ–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏–µ / –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ/–º–∞—Ç–µ—Ä–∏–∞–ª—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –º–æ–∂–Ω–æ, –Ω–∞–ø–∏—Å–∞–≤ –∞–≤—Ç–æ—Ä—É –∏–ª–∏ —Å–¥–µ–ª–∞–≤ fork. –õ—é–±–æ–µ –¥—Ä—É–≥–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∞–≤—Ç–æ—Ä–∞.

**–ì–¥–µ –≤ –∫–æ–¥–µ:** –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏/–∫–æ–Ω—Ç–∞–∫—Ç–µ ‚Äî `README.md`, `keyboards/kbs.py` (—É–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/–∫–æ–Ω—Ç–∞–∫—Ç–∞).

---